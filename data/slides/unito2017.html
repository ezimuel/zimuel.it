<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
        <base href="/lib/reveal.js-3.4.1/">
		<title>Sviluppare applicazioni web professionali in PHP 7</title>

		<meta name="description" content="Sviluppare applicazioni web professionali in PHP 7">
		<meta name="author" content="Enrico Zimuel">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body style="background-image: url('/img/slides/unito2017/background.png'); color: #EEEEEE;">

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h3>Sviluppare applicazioni web professionali in PHP 7</h3>
					<p>
						<small>di <a href="http://www.zimuel.it">Enrico Zimuel</a><br />
							<i>Senior Software Engineer</i><br />
							<a href="http://www.zend.com">Zend Technologies</a>, una società Rogue Wave (USA)</small><br /><br />
						<small><a href="https://www.unito.it/">Università Torino</a>, Dipartimento di Informatica, 11 Dic. 2017</small><br />
                        <a href="https://www.unito.it/"><img src="/img/slides/unito2017/logo-unito.png" width="300" style="border-style:none;"></a>
					</p>
				</section>

				<section>
					<h3>Enrico Zimuel</h3>
					<table style="font-size:80%">
						<tr>
							<td width="35%" style="padding-right:0;vertical-align: top">
								<img src="/img/slides/codemotion2017/enrico.png">
							</td>
							<td>
								<ul>
									<li>Sviluppatore web dal 1996</li>
									<li>Senior Software Engineer presso <a href="http://www.zend.com" target="_blank">Zend</a>, una società <a href="http://www.roguewave.com/">Rogue Wave</a></li>
									<li>Co-autore di <a href="http://apigility.org">Apigility</a>, <a href="https://docs.zendframework.com/zend-expressive/">Expressive</a> e <a href="http://framework.zend.com" target="_blank">Zend Framework</a></li>
									<li>Speaker <a href="https://www.youtube.com/watch?v=SienrLY40-w">TEDx</a> e relatore internazionale</li>
									<li>Research Programmer presso <a href="http://ivi.uva.nl/">Università di Amsterdam</a></li>
									<li>Co-fondatore del <a href="http://torino.grusp.org" target="_blank">PUG Torino</a></li>
								</ul>
							</td>
						</tr>
					</table>
				</section>

				<section>
					<p><img src="/img/slides/codemotion2017/sviluppareinphp7.jpg" height="450"></p>
					<p><small><a href="https://www.sviluppareinphp7.it/">www.sviluppareinphp7.it</a></small></p>
				</section>

				<section>
					<p><img src="/img/slides/codemotion2016/php.png" style="border-style:none;"></p>
				</section>

				<section>
					<h2>PHP</h2>
					<ul>
						<li class="fragment">PHP: Hypertext Preprocessor</li>
						<li class="fragment">Il linguaggio server-side più utilizzato al mondo: PHP è utilizzato dall'<strong>83.1%</strong> di tutti i siti web (fonte: <a href="https://w3techs.com/technologies/overview/programming_language/all">w3techs.com</a>)</li>
						<li class="fragment">Alcuni utenti del PHP: <strong>Facebook</strong>, <strong>Wikipedia</strong>, <strong>Yahoo</strong>, <strong>Etsy</strong>, <strong>Flickr</strong>, <strong>Digg</strong>, etc</li>
						<li class="fragment">22 anni di utilizzo, dal 1995</li>
						<li class="fragment">Completamente ad oggetti <strong>(OOP)</strong> dal PHP 5</li>
					</ul>
				</section>

				<section>
					<h2>L'ecosistema PHP</h2>
					<ul>
						<li class="fragment">CMS: <a href="https://www.drupal.org/">Drupal</a>, <a href="https://wordpress.org/">Wordpress</a>, <a href="https://www.joomla.org/">Joomla</a>, etc</li>
						<li class="fragment">E-commerce: <a href="https://magento.com/">Magento</a>, <a href="https://www.opencart.com/">OpenCart</a>, <a href="http://www.prestashop.com/">PrestaShop</a>, etc</li>
						<li class="fragment">CRM: <a href="https://civicrm.org/">CiviCRM</a>, <a href="http://www.sugarcrm.com/">SugarCRM</a>, <a href="https://www.vtiger.com/">Vtiger</a>, <a href="http://zurmo.org/">Zurmo</a>, etc</li>
						<li class="fragment">Wiki: <a href="https://www.dokuwiki.org">DokuWiki</a>, <a href="https://www.mediawiki.org">MediaWiki</a>, <a href="http://www.pmwiki.org/">PmWiki</a>, etc</li>
						<li class="fragment">Framework: <a href="https://laravel.com/">Laravel</a>, <a href="https://symfony.com/">Symfony</a>, <a href="https://framework.zend.com/">Zend Framework</a>, etc</li>
					</ul>
				</section>

				<section>
					<h2>PHP 7</h1>
					<ul>
						<li class="fragment">7.2.0 (30 Nov 2017)</li>
						<li class="fragment">7.1.12 (24 Nov 2017)</li>
					</ul>
				</section>

				<section>
					<h2>Performance</h2>
					<p><a href="https://wiki.php.net/phpng">PHPNG</a>, PHP Next Generation</p>
					<p>Progetto di Dmitry Stogov (<a href="http://www.zend.com">Zend</a>)</p>
					<p>Riscrittura completa del sistema di gestione dei dati nel core</p>
					<p>Notevoli miglioramenti di performance!</p>
				</section>

				<section>
					<h2>Benchmark</h2>
<pre><code data-trim lang="php">
$a = [];
for ($i = 0; $i < 1000000; $i++) {
  $a[$i] = ["hello"];
}
echo memory_get_usage(true);
</code></pre>
					<table class="fragment">
						<tr>
							<td></td>
							<td><strong>PHP 5.6</strong></td>
							<td><strong>PHP 7</strong></td>
						</tr>
						<tr>
							<td><strong>Memoria</strong></td>
							<td>428 MB</td>
							<td>33 MB</td>
						</tr>
						<tr>
							<td><strong>Tempi di esecuzione</strong></td>
							<td>0.49 sec</td>
							<td>0.06 sec</td>
						</tr>
					</table>
				</section>

				<section>
					<h2>Altri linguaggi</h2>
					<img src="/img/slides/codemotion2016/bench_lang.png" style="border-style:none">
					<small>PHP 7 è anche più veloce di <a href="http://benchmarksgame.alioth.debian.org/u64q/php.html">Python 3</a>!</small>
				</section>

				<section>
					<h2>Wordpress</h2>
					<img src="/img/slides/codemotion2016/bench_wordpress.png" style="border-style:none">
				</section>

				<section>
					<h2>Casi di studio</h2>
					<ul>
						<li class="fragment"><strong>Badoo</strong> risparmia un milione di dollari l'anno grazie a PHP 7 (<a href="https://techblog.badoo.com/blog/2016/03/14/how-badoo-saved-one-million-dollars-switching-to-php7/">fonte</a>)</li>
						<li class="fragment"><strong>Tumblr</strong> riduzione del 50% della latenza e del carico della CPU, grazie a PHP 7 (<a href="https://engineering.tumblr.com/post/152998126990/php-7-at-tumblr">fonte</a>)</li>
						<li class="fragment"><strong>Dailymotion</strong> gestisce il doppio del traffico web con la stessa infrastruttura, grazie a PHP 7 (<a href="http://engineering.dailymotion.com/php-7-deployment-at-dailymotion/">fonte</a>)</li>
					</ul>
				</section>

				<section>
					<table border="1">
						<tr>
							<td><strong>Versione</strong></td>
							<td><strong>Rilascio</strong></td>
							<td><strong>Supporto attivo</strong></td>
							<td><strong>Security fix</strong></td>
						</tr>
						<tr>
							<td bgcolor="orange">5.6</td>
							<td>28 Ago 2014</td>
							<td>19 Gen 2017</td>
							<td>31 Dic 2018</td>
						</tr>
						<tr>
							<td bgcolor="#a0e75a">7.0</td>
							<td>3 Dic 2015</td>
							<td>3 Dic 2017</td>
							<td>3 Dic 2018</td>
						</tr>
						<tr>
							<td bgcolor="#a0e75a">7.1</td>
							<td>1 Dic 2016</td>
							<td>1 Dic 2018</td>
							<td>1 Dic 2019</td>
						</tr>
						<tr>
							<td bgcolor="#a0e75a">7.2</td>
							<td>30 Nov 2017</td>
							<td>30 Nov 2019</td>
							<td>30 Nov 2020</td>
						</tr>
					</table>
				</section>

				<section>
					<h2>PHP 6 ?</h2>
					<p class="fragment">Supporto Unicode a livello del linguaggio</p>
					<p class="fragment">Mai rilasciato, progetto abbandonato</p>
				</section>

				<section>
					<h3>Sviluppo di applicazioni professionali in PHP 7</h3>
				</section>

				<section>
					<h2>Punti essenziali</h2>
					<ul>
						<li class="fragment">Scelta del framework di sviluppo</li>
						<li class="fragment">Versionamento dei sorgenti</li>
						<li class="fragment">Dipendenze con librerie esterne</li>
						<li class="fragment">Testare il codice</li>
						<li class="fragment">Log e monitoring</li>
						<li class="fragment">Gestione degli errori e delle eccezioni</li>
						<li class="fragment">File di configurazione</li>
						<li class="fragment">Deploy in produzione</li>
						<li class="fragment">Persistenza dei dati</li>
						<li class="fragment">Sicurezza</li>
					</ul>
				</section>

				<section>
					<h2>Framework di sviluppo</h2>
					<p class="fragment"><a href="https://laravel.com/">Laravel</a>, <a href="https://symfony.com/">Symfony</a>, <a href="https://framework.zend.com/">Zend Framework</a></p>
					<p class="fragment"><a href="https://docs.zendframework.com/zend-expressive/">Expressive</a>, <a href="https://lumen.laravel.com/">Lumen</a>, <a href="https://www.slimframework.com/">Slim</a>, <a href="https://silex.symfony.com/">Silex</a></p>
				</section>

				<section>
					<h2>Versionamento</h2>
					<p class="fragment">Git</p>
					<p class="fragment"><a href="https://github.com/">github.com</a>, <a href="https://bitbucket.org/">bitbucket.org</a></p>
				</section>

				<section>
					<h2>Gestione dipendenze</h2>
					<p class="fragment"><a href="https://getcomposer.org/">Composer</a></p>
					<p class="fragment">composer.json:</p>
<pre class="fragment"><code data-trim class="js">
{
    "require": {
        "monolog/monolog": "1.0.*"
    }
}
</code></pre>
				</section>

				<section>
					<h2>Test</h2>
					<p class="fragment"><a href="https://phpunit.de/">PHPUnit</a></p>
<pre class="fragment"><code data-trim class="php">
use PHPUnit\Framework\TestCase;

class EmailTest extends TestCase
{
    // ...

    public function testCanBeUsedAsString(): void
    {
        $this->assertEquals(
            'user@example.com',
            Email::fromString('user@example.com')
        );
    }
}
</code></pre>
				</section>

				<section>
					<h2>Log e monitoring</h2>
					<p class="fragment"><a href="http://php.net/manual/en/function.error-log.php">error_log()</a></p>
					<p class="fragment"><a href="https://github.com/Seldaek/monolog">monolog</a></p>
					<p class="fragment"><img src="/img/slides/unito2017/spike.png" width="600"></p>
				</section>

				<section>
					<h2>Errori ed Eccezioni</h2>
					<p class="fragment"><a href="http://php.net/manual/en/function.set-error-handler.php">set_error_handler()</a>, <a href="http://php.net/manual/en/function.set-exception-handler.php">set_exception_handler()</a></p>
					<p class="fragment"><a href="http://php.net/manual/en/class.throwable.php">Throwable</a>: Error, Exception</p>
				</section>

				<section>
					<h2>File di configurazione</h2>
					<p class="fragment">Yaml, Json, Xml, Ini, oppure PHP</p>
<pre class="fragment"><code data-trim class="php">
// config.php
return [
    'db' => [
        'dsn' => 'mysql:dbname=test;host=127.0.0.1',
        'user' => 'test',
        'password' => 'dH34f23q8Bvdrt34'
    ]
];

// index.php
$config = require 'config.php'; // $config['db']['dsn']
</code></pre>
				</section>

				<section>
					<h2>Deploy in produzione</h2>
					<p class="fragment"><a href="https://deployer.org/">Deployer</a>, <a href="https://www.ansible.com/">Ansible</a></p>
					<p class="fragment"><a href="https://www.vagrantup.com/">Vagrant</a>, <a href="https://www.docker.com/">Docker</a></p>
				</section>

				<section>
					<h2>Persistenza dei dati</h2>
					<p class="fragment"><a href="http://php.net/manual/en/book.pdo.php">PHP Data Objects</a> (PDO)</p>
					<p class="fragment">Object Relational Mapper (ORM): <a href="http://www.doctrine-project.org/">Doctrine</a>, <a href="http://propelorm.org/">Propel</a></p>
				</section>

				<section>
					<h2>Sicurezza</h2>
					<p class="fragment">Filter Input, Escape Output</p>
					<p class="fragment"><a href="http://php.net/manual/en/function.password-hash.php">password_hash()</a>, <a href="http://php.net/manual/en/function.password-verify.php">password_verify()</a></p>
					<p class="fragment"><a href="http://php.net/manual/en/book.openssl.php">OpenSSL</a>: openssl_encrypt/decrypt, <a href="https://github.com/jedisct1/libsodium-php">Sodium</a></p>
				</section>

				<section>
					<h2>Novità 7.1</h2>
				</section>

				<section>
					<h2>Tipo Nullable</h2>
					<ul>
						<li class="fragment">Per parametri e valori di ritorno di funzioni</li>
						<li class="fragment">Sintassi: aggiunta del <strong>?</strong> prima del tipo</li>
						<li class="fragment"><strong>null</strong> può essere passato come argomento,<br />o restituito come valore</li>
					</ul>
				</section>

				<section>
					<h2>Example</h2>
<pre><code data-trim class="php medium-font-code">
function hi(?string $name): ?string
{
    return $name ? 'Hello ' . $name : null;
}

echo hi(null); // returns null
echo hi('Enrico'); // returns 'Hello Enrico'
echo hi(); // Fatal error
</code></pre>
				</section>

				<section>
					<h2>Ritorno di tipo Void</h2>
<pre><code data-trim class="php medium-font-code">
function swap(&$left, &$right): void
{
    if ($left === $right) {
        return;
    }
    $tmp   = $left;
    $left  = $right;
    $right = $tmp;
}

$a = 1;
$b = 2;
var_dump(swap($a, $b), $a, $b);
</code></pre>
				</section>

				<section>
					<h2>Iterable</h2>
					<ul>
						<li class="fragment">Aggiunto lo pseudo-tipo <strong>iterable</strong></li>
						<li class="fragment">Accetta <strong>array</strong> o <strong>Traversable</strong></li>
						<li class="fragment">Utilizzato in parametri e ritorno di funzioni</li>
					</ul>
				</section>

				<section>
					<h2>Esempio</h2>
<pre><code data-trim class="php medium-font-code">
function foo(iterable $iterable): void
{
    foreach ($iterable as $value) {
        var_dump($value);
    }
}

foo([1,2,3]);
foo(new ArrayIterator([1,2,3]));
</code></pre>
				</section>

				<section>
					<h2>Costanti di classe</h2>
<pre><code data-trim class="php medium-font-code">
class ConstDemo
{
    const CONST_A = 1; // public
    public const CONST_B    = 2;
    protected const CONST_C = 3;
    private const CONST_D   = 4;
}
</code></pre>
				</section>

				<section>
					<h2>Catch multipli</h2>
<pre><code data-trim class="php medium-font-code">
try {
   // Some code...
} catch (ExceptionA | ExceptionB $e) {
   // Handle exceptions A or B
} catch (\Exception $e) {
   // ...
}
</code></pre>
				</section>

				<section>
					<h2>Indici negativi</h2>
<pre><code data-trim data-noescape class="php medium-font-code">
var_dump("abcdef"[-2]); <span class="fragment">// string(1) "e"</span>
var_dump("abcdef"[-7]); <span class="fragment">// string(0) "", PHP Notice</span>
// strpos
var_dump(strpos("aabbcc", "b", -3)); <span class="fragment">// int(3)</span>
</code></pre>
<pre class="fragment"><code data-trim class="php medium-font-code">
// get the last character of a string
$last = substr($foo, -1); // before PHP 7.1
$last = $foo[-1];
</code></pre>
				</section>

				<section>
					<h2>OpenSSL AEAD</h2>
					<p>Cifratura e autenticazione (Authenticated Encryption)</p>
					<p class="fragment">Supporto modalità <strong>GCM</strong> e <strong>CCM</strong></p>
					<p class="fragment">GCM è 3 volte più veloce di CCM. <a href="https://gist.github.com/ezimuel/485eb4745b58b30a2435bd92bdffb19f">Dettagli benchmark</a></p>
					<p class="fragment"><small>Più informazioni su <a href="http://zimuel.it/blog/authenticated-encrypt-with-openssl-and-php-7-1">Authenticated Encryption in PHP 7.1</a></small></p>

					<aside class="notes">
						Galois/Counter Mode (GCM), Counter with CBC-MAC (CCM)
					</aside>
				</section>

				<section>
					<h2>Funzionalità deprecate</h2>
				</section>

				<section>
					<h2><strike>Mcrypt</strike></h2>
					<p class="fragment">Utilizzare OpenSSL al suo posto</p>
				</section>

				<section>
					<h2>PHP 7.2</h1>
					<ul>
						<li class="fragment">7.2.0 (30 Nov 2017)</li>
					</ul>
				</section>

				<section>
					<h2>Alcune novità</h2>
				</section>

				<section>
					<h2>Performance</h2>
					<p><img src="/img/slides/unito2017/php72-benchmark.png"></p>
					<p class="fragment">
						PHP 7.2 è 20% più veloce di 7.0 e 10% di 7.1<br />
						<small>Fonte: <a href=""https://www.phoronix.com/scan.php?page=news_item&px=PHP-7.2-Beta-1>benchmark di Michael Larabel</a></small>
					</p>
				</section>

				<section>
					<h2>Tipo Object</h2>
					<p>Utilizzabile come parametro e ritorno di tipo</p>
<pre class="fragment"><code data-trim class="php medium-font-code">
function foo(object $obj): string {
    return $obj->var;
}

function bar(MyClass $arg): object {
    return $arg;
}
</code></pre>
				</section>

				<section>
					<h2>Type overriding</h2>
					<p>E' possibile omettere il tipo di un parametro su classi astratte estese:</p>
<pre class="fragment"><code data-trim class="php medium-font-code">
abstract class A
{
    abstract function test(string $s);
}

abstract class B extends A
{
    abstract function test($s) : int;
}
</code></pre>
				</section>

				<section>
					<h2>SQL sent</h2>
					<p>Aggiunta informazione di debug su PDO: la query SQL generata da PDOStatement</p>
<pre class="fragment"><code data-trim class="php medium-font-code">
$pdo = new PDO(
    'mysql:dbname=test;host=localhost',
    'user',
    'password'
);
$sth = $pdo->prepare(
    "SELECT * FROM user WHERE active=:active"
);
$sth->execute(['active' => true]);
$sth->debugDumpParams();
</code></pre>
				</section>

				<section>
					<h2>SQL sent (2)</h2>
<pre><code data-trim data-noescape class="medium-font-code">
SQL: [39] SELECT * FROM user WHERE active = :active
<mark style="background-color:#ff5e99;">Sent SQL</mark>: [35] SELECT * FROM user WHERE active='1'
Params:  1
Key: Name: [7] :active
paramno=-1
name=[7] ":active"
is_param=1
param_type=2
</code></pre>
				</section>

				<section>
					<h2>Argon2</h2>
					<p>Supporto algoritmo <a href="">Argon2i</a> per l'hash delle password</p>
<pre class="fragment"><code data-trim class="php medium-font-code">
$password = 'test';
$hash = password_hash($password, PASSWORD_ARGON2I);
var_dump($hash);
</code></pre>
					<p class="fragment"><i>$hash</i> conterrà una stringa di 98 caratteri</p>
				</section>

				<section>
					<h2>Sodium</h2>
					<p>Supporto crittografia moderna con la nuova estesione <strong>Sodium</strong> basata sulla libreria <a href="https://github.com/jedisct1/libsodium-php">libsodium</a></p>
				</section>

				<section>
					<h2>Grazie!</h2>
					<p>Contatti: enrico [at] zimuel.it</p>
					<p>Web: <a href="https://www.zimuel.it">www.zimuel.it</a></p>
					<p>Twitter: <a href="https://twitter.com/ezimuel">@ezimuel</a></p>
					<p><small><br /><br />
					<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="/img/slides/codemotion2017/license.png" /></a><br />Questa presentazione è rilasciata con licenza <br /> <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.<br />Presentazione realizzata con <a href="http://lab.hakim.se/reveal-js">reveal.js</a></small></p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
        	{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },

				]
			});

		</script>

	</body>
</html>
